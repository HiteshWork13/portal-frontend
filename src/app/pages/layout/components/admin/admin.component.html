<!-- <nz-card> -->
<div class="page-header p-t-0 m-t-0 minus-m-b-25">
  <!-- <div class="row align-items-md-center">
      <div class="col-md-6">hi</div>
      <div class="col-md-4">hi</div>
      <div class="col-md-2">hi</div>
    </div> -->
</div>
<ng-container *ngIf="adminTableJSON">
  <app-table
    [listOfData]="listOfData"
    [Config]="adminTableJSON"
    [Data]="adminList"
    (header_addClick)="openModal(temp, 'create', '')"
    (header_deleteClick)="showDeleteConfirm(null)"
  ></app-table>
</ng-container>
<div *ngIf="isUserVisible" style="margin: 25px 0 0 0">
  <app-sub-admin (close)="isUserVisible = false"></app-sub-admin>
</div>
<div *ngIf="isInstallmentVisible" style="margin: 25px 0 0 0">
  <!-- <app-installments
      [Data]="installmentData"
      (close)="isInstallmentVisible = false"
      ></app-installments> -->
  <app-user></app-user>
</div>
<!-- </nz-card> -->

<ng-template
  #adminActionTemplate
  let-column="column"
  let-row="row"
  let-rowIndex="rowIndex"
  let-columnIndex="columnIndex"
>
  <div style="position: relative" class="text-center" dropdown>
    <a
      dropdownToggle
      class="btn btn-light px-2 py-1 font-size-xl dropdown-toggle"
      (click)="$event.stopPropagation()"
    >
    </a>
    <nz-button-group>
      <span
        nz-button
        nz-dropdown
        [nzDropdownMenu]="menu1"
        nzPlacement="bottomRight"
        style="cursor: pointer"
      >
        <i nz-icon nzType="ellipsis"></i>
      </span>
    </nz-button-group>
    <nz-dropdown-menu #menu1="nzDropdownMenu">
      <ul nz-menu>
        <li nz-menu-item role="menuitem">
          <a class="dropdown-item" (click)="showAssociates(row)">{{
            "Sub admins"
          }}</a>
        </li>
        <li nz-menu-item role="menuitem">
          <a class="dropdown-item" (click)="openModal(temp, 'create', row)">{{
            "Edit"
          }}</a>
        </li>
        <li nz-menu-item role="menuitem">
          <a class="dropdown-item" (click)="showDeleteConfirm(row)">{{
            "Delete"
          }}</a>
        </li>
      </ul>
    </nz-dropdown-menu>
  </div>
</ng-template>

<ng-template #temp>
  <form
    nz-form
    nzLayout="vertical"
    id="addAdminForm"
    [formGroup]="adminForm"
    (ngSubmit)="onSubmit()"
  >
    <nz-form-item>
      <nz-form-label>Name</nz-form-label>
      <nz-form-control nzErrorTip="Enter a valid admin name">
        <input
          nz-input
          trim="blur"
          formControlName="username"
          maxlength="80"
          #adminName
          placeholder="Enter admin name"
        />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label>Email</nz-form-label>
      <nz-form-control nzErrorTip="Enter a valid admin email">
        <input
          nz-input
          trim="blur"
          formControlName="email"
          maxlength="80"
          placeholder="Enter email address"
        />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzFor="newPassword" class="text-black"
        >Password
      </nz-form-label>
      <nz-form-control [nzErrorTip]="newPasswordRef">
        <nz-input-group [nzPrefix]="prefixLock">
          <input
            id="myinputbox"
            type="password"
            nz-input
            formControlName="password"
            placeholder="Enter new password"
            autofocus
          />
        </nz-input-group>
        <ng-template #newPasswordRef>
          Password is not valid
          <i
            class="fa fa-info-circle float-right pt-1"
            nzPopoverPlacement="bottom"
            nz-popover
            nzType="primary"
            nzPopoverTitle="Password Criteria"
            [nzPopoverContent]="popoverContent"
          ></i>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
  </form>
</ng-template>
<ng-template #prefixLock><i nz-icon nzType="lock"></i></ng-template>

<ng-template #popoverContent>
  <ul class="p-l-20">
    <li>Alpahnumeric and at least 8 characters long <br /></li>
    <li>At least one uppercase letter <br /></li>
    <li>
      At least one of these characters ( @ / # / $ / % / ^ / & / + / = )<br />
    </li>
    <li>Must not contain spaces</li>
  </ul>
</ng-template>
